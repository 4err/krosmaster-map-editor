("function"!=typeof Blob&&"object"!=typeof Blob||"undefined"==typeof URL)&&(self.Blob=function(t){"use strict";t.URL=t.URL||t.webkitURL;var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},o=function(t,e,a){this.data=t,this.size=t.length,this.type=e,this.encoding=a},n=a.prototype,s=o.prototype,i=t.FileReaderSync,r=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=t.URL||t.webkitURL||t,h=d.createObjectURL,p=d.revokeObjectURL,f=d,u=t.btoa,g=t.atob,m=t.ArrayBuffer,b=t.Uint8Array;for(o.fake=s.fake=!0;c--;)r.prototype[l[c]]=c+1;return d.createObjectURL||(f=t.URL={}),f.createObjectURL=function(t){var e,a=t.type;return null===a&&(a="application/octet-stream"),t instanceof o?(e="data:"+a,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):u?e+";base64,"+u(t.data):e+","+encodeURIComponent(t.data)):h?h.call(d,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&p&&p.call(d,t)},n.append=function(t){var a=this.data;if(b&&(t instanceof m||t instanceof b)){for(var n="",s=new b(t),l=0,c=s.length;l<c;l++)n+=String.fromCharCode(s[l]);a.push(n)}else if("Blob"===e(t)||"File"===e(t)){if(!i)throw new r("NOT_READABLE_ERR");var d=new i;a.push(d.readAsBinaryString(t))}else t instanceof o?"base64"===t.encoding&&g?a.push(g(t.data)):"URI"===t.encoding?a.push(decodeURIComponent(t.data)):"raw"===t.encoding&&a.push(t.data):("string"!=typeof t&&(t+=""),a.push(unescape(encodeURIComponent(t))))},n.getBlob=function(t){return arguments.length||(t=null),new o(this.data.join(""),t,"raw")},n.toString=function(){return"[object BlobBuilder]"},s.slice=function(t,e,a){var n=arguments.length;return n<3&&(a=null),new o(this.data.slice(t,n>1?e:this.data.length),a,this.encoding)},s.toString=function(){return"[object Blob]"},a}(t);return function(t,a){var o=a?a.type||"":"",n=new e;if(t)for(var s=0,i=t.length;s<i;s++)n.append(t[s]);return n.getBlob(o)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)),function(t){"use strict";var e,a=t.Uint8Array,o=t.HTMLCanvasElement,n=o&&o.prototype,s=/\s*;\s*base64\s*(?:;|$)/i,i="toDataURL",r=function(t){for(var o,n,s=t.length,i=new a(s/4*3|0),r=0,l=0,c=[0,0],d=0,h=0;s--;)n=t.charCodeAt(r++),255!==(o=e[n-43])&&void 0!==o&&(c[1]=c[0],c[0]=n,h=h<<6|o,4===++d&&(i[l++]=h>>>16,61!==c[1]&&(i[l++]=h>>>8),61!==c[0]&&(i[l++]=h),d=0));return i};a&&(e=new a([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),o&&!n.toBlob&&(n.toBlob=function(t,e){if(e||(e="image/png"),this.mozGetAsFile)return void t(this.mozGetAsFile("canvas",e));var o,n=Array.prototype.slice.call(arguments,1),l=this[i].apply(this,n),c=l.indexOf(","),d=l.substring(c+1),h=s.test(l.substring(0,c));Blob.fake?(o=new Blob,o.encoding=h?"base64":"URI",o.data=d,o.size=d.length):a&&(o=h?new Blob([r(d)],{type:e}):new Blob([decodeURIComponent(d)],{type:e})),t(o)},n.toDataURLHD?n.toBlobHD=function(){i="toDataURLHD";var t=this.toBlob();return i="toDataURL",t}:n.toBlobHD=n.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,a=function(){return t.URL||t.webkitURL||t},o=t.URL||t.webkitURL||t,n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),s=!t.externalHost&&"download"in n,i=t.webkitRequestFileSystem,r=t.requestFileSystem||i||t.mozRequestFileSystem,l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c=0,d=[],h=function(){for(var t=d.length;t--;){var e=d[t];"string"==typeof e?o.revokeObjectURL(e):e.remove()}d.length=0},p=function(t,e,a){e=[].concat(e);for(var o=e.length;o--;){var n=t["on"+e[o]];if("function"==typeof n)try{n.call(t,a||t)}catch(t){l(t)}}},f=function(o,l){var h,f,u,g=this,m=o.type,b=!1,v=function(){var t=a().createObjectURL(o);return d.push(t),t},$=function(){p(g,"writestart progress write writeend".split(" "))},y=function(){!b&&h||(h=v()),f?f.location.href=h:window.open(h,"_blank"),g.readyState=g.DONE,$()},w=function(t){return function(){if(g.readyState!==g.DONE)return t.apply(this,arguments)}},R={create:!0,exclusive:!1};if(g.readyState=g.INIT,l||(l="download"),s){h=v(),e=t.document,n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n.href=h,n.download=l;var C=e.createEvent("MouseEvents");return C.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(C),g.readyState=g.DONE,void $()}if(t.chrome&&m&&"application/octet-stream"!==m&&(u=o.slice||o.webkitSlice,o=u.call(o,0,o.size,"application/octet-stream"),b=!0),i&&"download"!==l&&(l+=".download"),("application/octet-stream"===m||i)&&(f=t),!r)return void y();c+=o.size,r(t.TEMPORARY,c,w(function(t){t.root.getDirectory("saved",R,w(function(t){var e=function(){t.getFile(l,R,w(function(t){t.createWriter(w(function(e){e.onwriteend=function(e){f.location.href=t.toURL(),d.push(t),g.readyState=g.DONE,p(g,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&y()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=g["on"+t]}),e.write(o),g.abort=function(){e.abort(),g.readyState=g.DONE},g.readyState=g.WRITING}),y)}),y)};t.getFile(l,{create:!1},w(function(t){t.remove(),e()}),w(function(t){t.code===t.NOT_FOUND_ERR?e():y()}))}),y)}),y)},u=f.prototype,g=function(t,e){return new f(t,e)};return u.abort=function(){var t=this;t.readyState=t.DONE,p(t,"abort")},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,t.addEventListener("unload",h,!1),g.unload=function(){h(),t.removeEventListener("unload",h,!1)},g}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),$(function(){function t(t,e){var a=document.getElementById("createur"),o=a.getContext("2d");return o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,72,72),o.translate(36,36),"left"==t?o.rotate(Math.PI/2):"bottom"==t?o.rotate(Math.PI):"right"==t&&o.rotate(3*Math.PI/2),o.fillStyle=e,o.beginPath(),o.moveTo(-36,24),o.lineTo(0,-36),o.lineTo(36,24),o.lineTo(19,24),o.lineTo(10,12),o.lineTo(10,36),o.lineTo(-10,36),o.lineTo(-10,12),o.lineTo(-19,24),o.lineTo(0,24),o.fill(),o.closePath(),a.toDataURL()}function e(t,e){var a=document.getElementById("createur"),o=a.getContext("2d");o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,72,72),o.translate(36,36);return"aleft"==t?o.rotate(Math.PI/2):"abottom"==t?o.rotate(Math.PI):"aright"==t&&o.rotate(3*Math.PI/2),o.fillStyle=e,o.fillRect(-10,-36,20,46),o.fillRect(-36,-10,46,20),a.toDataURL()}function a(t,e){var a=document.getElementById("createur"),o=a.getContext("2d");o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,72,72),o.translate(36,36),o.fillStyle=e;return"hori"==t&&o.rotate(Math.PI/2),o.fillStyle=e,o.fillRect(-10,-36,20,72),a.toDataURL()}function o(t){var e=document.getElementById("createur"),a=e.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,72,72),a.fillStyle=t;return a.translate(e.width/2,e.height/2),a.rotate(Math.PI/4),a.fillStyle=t,a.fillRect(-36,-7.5,72,15),a.fillRect(-7.5,-36,15,72),e.toDataURL()}function n(t){var e=document.getElementById("canvasKit"),a=e.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,93,93),a.translate(93,0);var o=new Image;return o.src=t,a.rotate(Math.PI/2),a.drawImage(o,0,0),e.toDataURL()}$("#dialog").dialog({height:500,width:660,dialogClass:"no-close",closeOnEscape:!1,open:function(){$(".ui-dialog-title").attr("id","titlebarDialog").append("<img src = 'http://i76.servimg.com/u/f76/18/18/28/87/pion_b12.png' alt ='bombe_tooltip' id = 'bombe_tooltip'>")}}),$("#tabs").tabs({heightStyle:"fill"}),$("#choice_map").change(function(){$("#map").attr("src","img/maps/"+this.value+".png")}),$("#dialog_enreg").dialog({height:180,width:500}).dialog("close"),$("#dialog_aide").dialog({height:600,width:450,autoOpen:!1,show:{effect:"blind",duration:1e3},hide:{effect:"blind",duration:1e3}}).dialog("close"),$("#createur").hide(),$("#canvas").hide(),$("#canvasKit").hide(),$("#accordion").accordion({heightStyle:"content"}),$(document).on("mouseover",".prototype",function(){$(this).draggable({delay:100,appendTo:"body",containment:"parent",cursor:"move",scroll:!0,scrollSpeed:30,scrollSensitivity:100,helper:"clone",start:function(t,e){$("#dialog").hide("blind")},stop:function(t,e){if($("#dialog").show("blind"),$(this).is(".circle")){snappy=!1;var a="circle"}else if($(this).is(".schema")){snappy=".schema";var a="schema"}else if($(this).is(".kit")){snappy=".kit";var a="kit"}else{snappy=!1;var a="truc"}$("<span class = 'jeton "+a+"'>"+$(this).html()+"</span>").appendTo("body").css({position:"absolute",left:e.offset.left,top:e.offset.top,"border-color":$(this).css("borderTopColor")}).draggable({snap:snappy,snapMode:"both",snapTolerance:5,delay:100,containment:"parent",cursor:"move",scroll:!0,scrollSpeed:30,scrollSensitivity:100,helper:"clone",start:function(t,e){$("#dialog").hide("blind"),$(this).hide()},stop:function(t,e){$("#dialog").show("blind"),$(this).appendTo("body").css({position:"absolute",left:e.offset.left,top:e.offset.top}).show()}}).show()}})}),$(document).on("dblclick",".circle",function(t){if(1==t.which){var e={"rgb(0, 0, 0)":"blue","rgb(0, 0, 255)":"red","rgb(255, 0, 0)":"orange","rgb(255, 165, 0)":"purple","rgb(128, 0, 128)":"black"};$(this).css("border-color",e[$(this).css("borderTopColor")])}}),$(document).on("contextmenu",".jeton",function(t){return $(this).remove(),!1}),$("#bouton_enreg").button(),$(document).on("click","#bouton_enreg",function(t){$("#dialog_enreg").dialog("open")}),$("#bouton_valid").button(),$(document).on("click","#bouton_valid",function(t){$.post("compteurE.php"),$("#canvas").attr("width",$("#qualite").val()).attr("height",$("#qualite").val());var e=$("#qualite").val()/1196,a=document.getElementById("canvas"),o=a.getContext("2d"),n=new Image;n.src=$("#map").attr("src"),n.alt="test",o.drawImage(n,0,0,1196,1196,0,0,1196*e,1196*e),$(".jeton").each(function(){var t=new Image,a=document.getElementById("canvas"),o=a.getContext("2d"),n=$("img",this);t.src=n.attr("src");var s=n.offset(),i=$("#map").offset();"jeton kit ui-draggable"==$(this).attr("class")?(o.drawImage(t,0,0,93,93,e*(s.left-i.left),e*(s.top-i.top),93*e,93*e),$("#symC").prop("checked")&&(o.transform(-1,0,0,-1,1196*e,1196*e),o.drawImage(t,0,0,93,93,e*(s.left-i.left),e*(s.top-i.top),93*e,93*e),o.transform(1,0,0,1,0,0))):"jeton truc ui-draggable"==$(this).attr("class")?o.drawImage(t,0,0,40,40,e*(s.left-i.left),e*(s.top-i.top),40*e,40*e):o.drawImage(t,0,0,72,72,e*(s.left-i.left),e*(s.top-i.top),72*e,72*e),"jeton circle ui-draggable"==$(this).attr("class")&&(o.beginPath(),o.strokeStyle=$(this).css("borderTopColor"),o.lineWidth=8*e,o.arc(e*(s.left-i.left+36),e*(s.top-i.top+36),40*e,0,6.28),o.stroke(),o.closePath())}),a.toBlob(function(t){saveAs(t,$("#nomImage").val()+".png")})}),$("#bombe_tooltip").button(),$(document).on("click","#bombe_tooltip",function(){$("#dialog_aide").dialog("open")}),$(document).on("dblclick",".kit",function(t){1==t.which&&$(this).children("img").attr("src",n($(this).children("img").attr("src")))}),$(document).on("dblclick",".schema",function(n){if(1==n.which){if($(this).children("img").hasClass(".black"))var s="blue";if($(this).children("img").hasClass(".blue"))var s="red";if($(this).children("img").hasClass(".red"))var s="orange";if($(this).children("img").hasClass(".orange"))var s="purple";if($(this).children("img").hasClass(".purple"))var s="black";$(this).children("img").hasClass(".croix")&&$(this).children("img").attr("src",o(s)).removeClass().addClass(".croix").addClass("."+s),$(this).children("img").hasClass(".top")&&$(this).children("img").attr("src",t("top",s)).removeClass().addClass(".top").addClass("."+s),$(this).children("img").hasClass(".bottom")&&$(this).children("img").attr("src",t("bottom",s)).removeClass().addClass(".bottom").addClass("."+s),$(this).children("img").hasClass(".left")&&$(this).children("img").attr("src",t("left",s)).removeClass().addClass(".left").addClass("."+s),$(this).children("img").hasClass(".right")&&$(this).children("img").attr("src",t("right",s)).removeClass().addClass(".right").addClass("."+s),$(this).children("img").hasClass(".atop")&&$(this).children("img").attr("src",e("atop",s)).removeClass().addClass(".atop").addClass("."+s),$(this).children("img").hasClass(".abottom")&&$(this).children("img").attr("src",e("abottom",s)).removeClass().addClass(".abottom").addClass("."+s),$(this).children("img").hasClass(".aleft")&&$(this).children("img").attr("src",e("aleft",s)).removeClass().addClass(".aleft").addClass("."+s),$(this).children("img").hasClass(".aright")&&$(this).children("img").attr("src",e("aright",s)).removeClass().addClass(".aright").addClass("."+s),$(this).children("img").hasClass(".vert")&&$(this).children("img").attr("src",a("vert",s)).removeClass().addClass(".vert").addClass("."+s),$(this).children("img").hasClass(".hori")&&$(this).children("img").attr("src",a("hori",s)).removeClass().addClass(".hori").addClass("."+s)}}),$("<span class = 'prototype schema'><img src ='"+t("left","black")+"' class = '.left .black' ></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+t("right","black")+"'class = '.right .black' ></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+t("top","black")+"' class = '.top .black'></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+t("bottom","black")+"'class = '.bottom .black' ></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+e("atop","black")+"' class = '.atop .black'></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+e("aright","black")+"'class = '.aright .black' ></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+e("abottom","black")+"'class = '.abottom .black' ></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+e("aleft","black")+"' class = '.aleft .black' ></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+a("verti","black")+"' class = '.vert .black'></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+a("hori","black")+"' class = '.hori .black'></span>").appendTo("#tabs-8"),$("<span class = 'prototype schema'><img src ='"+o("black")+"' class = '.croix .black'></span>").appendTo("#tabs-8")});